# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –£–ü–†–ê–í–õ–ï–ù–ò–ï –®–ê–ë–õ–û–ù–û–ú –°–ê–ô–¢–ê-–ó–ê–ì–õ–£–®–ö–ò
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

manage_random_template() {
    while true; do
    clear
    echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
    echo -e "${GREEN}   üé® –°–ú–ï–ù–ê –®–ê–ë–õ–û–ù–ê –°–ê–ô–¢–ê-–ó–ê–ì–õ–£–®–ö–ò${NC}"
    echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
    echo

    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —à–∞–±–ª–æ–Ω
    if [ -f /var/www/.current_template ]; then
        local current_template
        current_template=$(cat /var/www/.current_template)
        echo -e "${WHITE}–¢–µ–∫—É—â–∏–π —à–∞–±–ª–æ–Ω:${NC} ${YELLOW}${current_template}${NC}"
        if [ -f /var/www/.template_changed ]; then
            local changed_date
            changed_date=$(cat /var/www/.template_changed)
            echo -e "${DARKGRAY}–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: ${changed_date}${NC}"
        fi
        echo
    else
        echo -e "${YELLOW}–®–∞–±–ª–æ–Ω –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"
        echo
    fi
    
    # –°–ø—Ä–∞—à–∏–≤–∞–µ–º –∫–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω
    show_arrow_menu "üé®  –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–±" \
        "üé≤  –°–ª—É—á–∞–π–Ω—ã–π —à–∞–±–ª–æ–Ω" \
        "üìã  –í—ã–±—Ä–∞—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞" \
        "‚ùå  –ù–∞–∑–∞–¥"
    local choice=$?
    [[ $choice -eq 255 ]] && return

    case $choice in
        0)
            clear
            echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
            echo -e "${GREEN}   üé≤ –°–õ–£–ß–ê–ô–ù–´–ô –®–ê–ë–õ–û–ù${NC}"
            echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
            echo
            randomhtml
            ;;
        1)
            show_arrow_menu "üé®  –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω" \
                "üè¢  NexCore - –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø–æ—Ä—Ç–∞–ª" \
                "üíª  DevForge - –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ö–∞–±" \
                "‚òÅÔ∏è   Nimbus - –û–±–ª–∞—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã" \
                "üí≥  PayVault - –§–∏–Ω—Ç–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞" \
                "üìö  LearnHub - –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞" \
                "üé¨  StreamBox - –ú–µ–¥–∏–∞ –ø–æ—Ä—Ç–∞–ª" \
                "üõí  ShopWave - E-commerce" \
                "üéÆ  NeonArena - –ò–≥—Ä–æ–≤–æ–π –ø–æ—Ä—Ç–∞–ª" \
                "üë•  ConnectMe - –°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å" \
                "üìä  DataPulse - –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä" \
                "‚Çø  CryptoNex - –ö—Ä–∏–ø—Ç–æ –±–∏—Ä–∂–∞" \
                "‚úàÔ∏è   WanderWorld - –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ" \
                "üí™  IronPulse - –§–∏—Ç–Ω–µ—Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞" \
                "üì∞  –í–µ—Å—Ç–Ω–∏–∫–ü–†–û - –ù–æ–≤–æ—Å—Ç–Ω–æ–π –ø–æ—Ä—Ç–∞–ª" \
                "üéµ  SoundWave - –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å" \
                "üè†  HomeNest - –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å" \
                "üçï  FastBite - –î–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã" \
                "üöó  AutoElite - –ê–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª" \
                "üé®  Prisma Studio - –î–∏–∑–∞–π–Ω —Å—Ç—É–¥–∏—è" \
                "üíº  Vertex Advisory - –ö–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥ —Ü–µ–Ω—Ç—Ä" \
                "‚ùå  –ù–∞–∑–∞–¥"
            local template_choice=$?
            [[ $template_choice -eq 255 ]] && return

            if [ $template_choice -eq 20 ]; then
                return
            fi
            
            clear
            echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
            echo -e "${GREEN}   üé® –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –®–ê–ë–õ–û–ù–ê${NC}"
            echo -e "${BLUE}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
            echo
            
            apply_template $((template_choice + 1))
            ;;
        2)
            return
            ;;
    esac
    
    echo

    if docker ps --filter "name=remnawave-nginx" --format "{{.Names}}" 2>/dev/null | grep -q "remnawave-nginx"; then
        (
            cd "${DIR_PANEL}" 2>/dev/null
            docker compose restart remnawave-nginx >/dev/null 2>&1
        ) &
        show_spinner "–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
    fi

    print_success "–®–∞–±–ª–æ–Ω —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω—ë–Ω"
    echo
    show_continue_prompt
    done
}
